THREE.DDSLoader=function(){this._parser=THREE.DDSLoader.parse},THREE.DDSLoader.prototype=Object.create(THREE.CompressedTextureLoader.prototype),THREE.DDSLoader.prototype.constructor=THREE.DDSLoader,THREE.DDSLoader.parse=function(r,a){var e={mipmaps:[],width:0,height:0,format:null,mipmapCount:1};function o(r){return r.charCodeAt(0)+(r.charCodeAt(1)<<8)+(r.charCodeAt(2)<<16)+(r.charCodeAt(3)<<24)}function t(r,a,e,o){for(var t=e*o*4,n=new Uint8Array(r,a,t),m=new Uint8Array(t),i=0,p=0,E=0;E<o;E++)for(var s=0;s<e;s++){var u=n[p],d=n[++p],c=n[++p],D=n[++p];p++,m[i]=c,m[++i]=d,m[++i]=u,m[++i]=D,i++}return m}var n,m=o("DXT1"),i=o("DXT3"),p=o("DXT5"),E=o("ETC1"),s=new Int32Array(r,0,31);if(542327876!==s[0])return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),e;if(4&!s[20])return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),e;var u,d=s[21],c=!1;switch(d){case m:n=8,e.format=THREE.RGB_S3TC_DXT1_Format;break;case i:n=16,e.format=THREE.RGBA_S3TC_DXT3_Format;break;case p:n=16,e.format=THREE.RGBA_S3TC_DXT5_Format;break;case E:n=8,e.format=THREE.RGB_ETC1_Format;break;default:if(!(32===s[22]&&16711680&s[23]&&65280&s[24]&&255&s[25]&&4278190080&s[26]))return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",(u=d,String.fromCharCode(255&u,u>>8&255,u>>16&255,u>>24&255))),e;c=!0,n=64,e.format=THREE.RGBAFormat}e.mipmapCount=1,131072&s[2]&&!1!==a&&(e.mipmapCount=Math.max(1,s[7]));var D=s[28];if(e.isCubemap=!!(512&D),e.isCubemap&&(!(1024&D)||!(2048&D)||!(4096&D)||!(8192&D)||!(16384&D)||!(32768&D)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),e;e.width=s[4],e.height=s[3];for(var T=s[1]+4,h=e.isCubemap?6:1,f=0;f<h;f++)for(var C=e.width,R=e.height,H=0;H<e.mipmapCount;H++){if(c)var S=(v=t(r,T,C,R)).length;else{S=Math.max(4,C)/4*Math.max(4,R)/4*n;var v=new Uint8Array(r,T,S)}var _={data:v,width:C,height:R};e.mipmaps.push(_),T+=S,C=Math.max(C>>1,1),R=Math.max(R>>1,1)}return e};